<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function print(a) {
            console.log(a);
        }
        print("hello")
        // ================================================
        function my_find(table, relation) {
            return table.find(elm => elm.relation == relation);
        }

        function sum(inheritance_result_table) {
            let res = 0;
            for(let i = 0; i < inheritance_result_table.length; i++) {
                res += inheritance_result_table[i].share;
            }

            return res;
        }

        // returns the index of the mo3asib, and -1 if there is no mo3asib
        function there_is_mo3asib(inheritance_result_table) {
            let i = 0;
            for(i = 0; i < inheritance_result_table.length; i++) {
                if(inheritance_result_table[i].mo3asib == true)
                    break;
            }
            if(inheritance_result_table.length == 0)
                return -1;
            if(i >= inheritance_result_table.length)
                return -1;
            return i;
        }

        // مسالة ردية (يعني لا يوجد معصب والقسمة اقل من 1) انزع الزوجين ورد الباقي للاخرين
        function give_back_the_rest(inheritance_result_table) {
            let the_rest = 1 - sum(inheritance_result_table);
            // sum without the spouses
            let partial_sum  = 0;
            for(let i = 0; i < inheritance_result_table.length; i++) {
                let relation = inheritance_result_table[i].relation;
                if(relation != "wife" && relation != "husband") {
                    partial_sum += inheritance_result_table[i].share;
                }
            }

            for(let i = 0; i < inheritance_result_table.length; i++) {
                let relation = inheritance_result_table[i].relation;
                if(relation != "wife" && relation != "husband") {
                    inheritance_result_table[i].share += the_rest * inheritance_result_table[i].share * (1/partial_sum);
                }
            }
        }

        function first_diagram(table, inheritance_result_table) {
            let husband = my_find(table, "husband");
            let wife = my_find(table, "wife");

            if (husband.number == 0) {
                inheritance_result_table.push({
                    relation : "wife",
                    share : 1/4,
                    reason : "fardan",
                    info : [
                        "if more then one, equal division",
                        "rest for relatives (dawi arham)"
                    ]
                });
            } else {
                inheritance_result_table.push({
                    relation : "husband",
                    share : 1/2,
                    reason : "fardan",
                    info : [
                        "rest for relatives (dawi arham)"
                    ]
                })
            }
        }


        function second_diagram(table, inheritance_result_table) {
            let husband = my_find(table, "husband");
            let wife = my_find(table, "wife");

            if (husband.number == 0) {
                inheritance_result_table.push({
                    relation : "wife",
                    share : 1/4,
                    reason : "fardan",
                    info : [
                        "if more then one, equal division",
                    ]
                });
                inheritance_result_table.push({
                    relation : "mother",
                    share : 1/4,
                    reason : "fardan",
                    info : [
                        "quarter of the rest which is 1/4",
                    ]
                });
                inheritance_result_table.push({
                    relation : "father",
                    share : 1/2,
                    reason : "ta3siban",
                    info : [
                        "the rest which is 1/2",
                    ]
                })
            } else {
                inheritance_result_table.push({
                    relation : "husband",
                    share : 1/2,
                    reason : "fardan",
                    info : [
                    ]
                });
                inheritance_result_table.push({
                    relation : "mother",
                    share : Math.round((1/6)*10000)/10000,
                    reason : "fardan",
                    info : [
                        "third of the rest which is 1/6"
                    ]
                });
                inheritance_result_table.push({
                    relation : "father",
                    share : Math.round((1/3)*10000)/10000,
                    reason : "ta3siban",
                    info : [
                        "the rest which is 1/3"
                    ]
                })
            }
        }

        function third_diagram(table, inheritance_result_table) {
            if(my_find(table, "father").number == 1) {
                inheritance_result_table.push({
                    relation : "father",
                    share : Math.round((1/6)*10000)/10000,
                    reason : "fardan",
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share"
                    ]
                })
            } else if(my_find(table, "paternal grandfather").number == 1) {
                inheritance_result_table.push({
                    relation : "paternal grandfather",
                    share : Math.round((1/6)*10000)/10000,
                    reason : "fardan",
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share"
                    ]
                })
            }


            if(my_find(table, "mother").number == 1) {
                inheritance_result_table.push({
                    relation : "mother",
                    share : Math.round((1/6)*10000)/10000,
                    reason : "fardan",
                    info : [
                        "if the shares are more then 1, Decreased from her share according to her original share"
                    ]
                })
            } else if(my_find(table, "maternal grandmother").number == 1) {
                if(my_find(table, "paternal grandmother").number == 1) {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : Math.round((1/12)*10000)/10000,
                        reason : "fardan",
                        info : [
                            "if the shares are more then 1, Decreased from her share according to her original share",
                            "divide the 1/6 between paternal grandmother and maternal grandmother"
                        ]
                    })
                    inheritance_result_table.push({
                        relation : "paternal grandmother",
                        share : Math.round((1/12)*10000)/10000,
                        reason : "fardan",
                        info : [
                            "if the shares are more then 1, Decreased from her share according to her original share",
                            "divide the 1/6 between paternal grandmother and maternal grandmother"
                        ]
                    })
                } else {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : Math.round((1/6)*10000)/10000,
                        reason : "fardan",
                        info : [
                            "if the shares are more then 1, Decreased from her share according to her original share"
                        ]
                    })
                }
            } else if(my_find(table, "paternal grandmother").number == 1) {
                inheritance_result_table.push({
                    relation : "paternal grandmother",
                    share : Math.round((1/6)*10000)/10000,
                    reason : "fardan",
                    info : [
                        "if the shares are more then 1, Decreased from her share according to her original share"
                    ]
                })
            }


            if(my_find(table, "husband").number == 1) {
                inheritance_result_table.push({
                    relation : "husband",
                    share : Math.round((1/4)*10000)/10000,
                    reason : "fardan",
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share"
                    ]
                })
            } else if(my_find(table, "wife").number > 0) {
                inheritance_result_table.push({
                    relation : "wife",
                    share : Math.round((1/8)*10000)/10000,
                    reason : "fardan",
                    info : [
                        "if the shares are more then 1, Decreased from there shares according to there original shares"
                    ]
                })
            }


            if(my_find(table, "son").number > 0) {
                if(my_find(table, "daughter").number > 0) {
                    const sons = my_find(table, "son").number;
                    const daughters = my_find(table, "daughter").number;
                    const sum_of_shares = sum(inheritance_result_table);
                    // if(sum_of_shares < 1) {
                        const the_rest = 1 - sum_of_shares;
                        const share_of_one_daughter = the_rest / (daughters+(sons*2))
                        const share_of_all_daughters = share_of_one_daughter*daughters;
                        const share_of_all_sons = share_of_one_daughter*sons*2;
                        inheritance_result_table.push({
                            relation : "son",
                            share : Math.round((share_of_all_sons)*10000)/10000,
                            reason : "ta3siban",
                            info : [
                                "For the male is like the share of two females"
                            ]
                        });
                        inheritance_result_table.push({
                            relation : "daughter",
                            share : Math.round((share_of_all_daughters)*10000)/10000,
                            reason : "ta3siban",
                            info : [
                                "For the male is like the share of two females"
                            ]
                        });
                    // }
                } else {
                    const sum_of_shares = sum(inheritance_result_table);
                    // if(sum_of_shares < 1) {
                        const the_rest = 1 - sum_of_shares;
                        inheritance_result_table.push({
                            relation : "son",
                            share : Math.round((the_rest)*10000)/10000,
                            reason : "ta3siban",
                            info : [
                            ]
                        });
                    // }
                }
            } else { 
                if(my_find(table, "daughter").number > 0) {
                    if(my_find(table, "daughter").number == 1) {
                        inheritance_result_table.push({
                            relation : "daughter",
                            share : Math.round((1/2)*10000)/10000,
                            reason : "fardan",
                            info : [
                                "if the shares are more then 1, Decreased from her share according to her original share"
                            ]
                        });
                    } else {
                        inheritance_result_table.push({
                            relation : "daughter",
                            share : Math.round((2/3)*10000)/10000,
                            reason : "fardan",
                            info : [
                                "if the shares are more then 1, Decreased from her share according to her original share"
                            ]
                        });
                    }
                }
            // WE ARE SURE THERE IS SON'S SON
                    if(my_find(table, "son's daughter").number > 0) {
                    const son_sons = my_find(table, "son's son").number;
                    const son_daughters = my_find(table, "son's daughter").number;
                    const sum_of_shares = sum(inheritance_result_table);
                    // if (sum_of_shares < 1) {
                        const the_rest = 1 - sum_of_shares;
                        const share_of_one_son_daughter = the_rest / (son_daughters+(son_sons*2));
                        const share_of_all_son_daughers = share_of_one_son_daughter * son_daughters;
                        const share_of_all_son_sons = share_of_one_son_daughter * son_sons * 2;
                        inheritance_result_table.push({
                            relation : "son's son",
                            share : Math.round((share_of_all_son_sons)*10000)/10000,
                            reason : "ta3siban",
                            info : [
                                "if the shares are more then 1, nothing is left for them"
                            ]
                        });
                        inheritance_result_table.push({
                            relation : "son's daughter",
                            share : Math.round((share_of_all_son_daughers)*10000)/10000,
                            reason : "ta3siban",
                            info : [
                                "if the shares are more then 1, nothing is left for them"
                            ]
                        });
                    // }
                    } else {
                        const sum_of_shares = sum(inheritance_result_table);
                        // if(sum_of_shares < 1) {
                            const the_rest = 1 - sum_of_shares;
                            inheritance_result_table.push({
                                relation : "son's son",
                                share : Math.round((the_rest)*10000)/10000,
                                reason : "ta3siban",
                                info : [
                                    "if the shares are more then 1, nothing is left for them"
                                ]
                            });
                        // }
                    }
            }

            const sum_of_all_shares = sum(inheritance_result_table); 
            // اذا المسالة عالت
            if (sum_of_all_shares >= 1) {
                for(let i = 0; i < inheritance_result_table.length; i++) {
                    inheritance_result_table[i].share = inheritance_result_table[i].share * (1/sum_of_all_shares);
                }
            }

            
        }




        function fourth_diagram(table, inheritance_result_table) {
            const father = my_find(table, "father").number;
            const paternal_grandfather = my_find(table, "paternal grandfather").number;
            const mother = my_find(table, "mother").number;
            const maternal_grandmother = my_find(table, "maternal grandmother").number;
            const paternal_grandmother = my_find(table, "paternal grandmother").number;
            const husband = my_find(table, "husband").number;
            const wife = my_find(table, "wife").number;
            const daughter = my_find(table, "daughter").number;
            const son_daughter = my_find(table, "son's daughter").number;

            if(father == 1) {
                inheritance_result_table.push({
                    relation : "father",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : true,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share"
                    ]
                });
            } else if(paternal_grandfather == 1) {
                inheritance_result_table.push({
                    relation : "paternal grandfather",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : true,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share"
                    ]
                });
            }



            if(mother == 1) {
                inheritance_result_table.push({
                    relation : "mother",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share",
                        "If there is anything left of the estate, it will be returned to her according to her share"
                    ]
                });
            } else if(maternal_grandmother == 1) {
                if(paternal_grandmother == 1) {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : 1/12,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "if the shares are more then 1, Decreased from his share according to his original share",
                            "If there is anything left of the estate, it will be returned to her according to her share"
                        ]
                    });
                    inheritance_result_table.push({
                        relation : "paternal grandmother",
                        share : 1/12,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "if the shares are more then 1, Decreased from his share according to his original share",
                            "If there is anything left of the estate, it will be returned to her according to her share"
                        ]
                    });
                } else {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : 1/6,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "if the shares are more then 1, Decreased from his share according to his original share",
                            "If there is anything left of the estate, it will be returned to her according to her share"
                        ]
                    });
                }
            } else if(paternal_grandmother == 1) {
                inheritance_result_table.push({
                    relation : "paternal grandmother",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share",
                        "If there is anything left of the estate, it will be returned to her according to her share"
                    ]
                });
            }



            if(husband == 1) {
                inheritance_result_table.push({
                    relation : "husband",
                    share : 1/4,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share",
                        "If there is anything left of the estate, it will not be returned to him according to his share"
                    ]
                });
            } else if(wife > 0) {
                inheritance_result_table.push({
                    relation : "wife",
                    share : 1/8,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share",
                        "If there is anything left of the estate, it will not be returned to her according to her share"
                    ]
                });
            }



            if(daughter > 0) {
                if(daughter == 1) {
                    inheritance_result_table.push({
                        relation : "daughter",
                        share : 1/2,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "if the shares are more then 1, Decreased from his share according to his original share",
                            "If there is anything left of the estate, it will be returned to her according to her share"
                        ]
                    });
                    if(son_daughter > 0) {
                        inheritance_result_table.push({
                            relation : "son's daughter",
                            share : 1/6,
                            reason : "fardan",
                            mo3asib : false,
                            info : [
                                "if the shares are more then 1, Decreased from his share according to his original share",
                                "If there is anything left of the estate, it will be returned to her according to her share"
                            ]
                        });
                    }
                } else {
                    inheritance_result_table.push({
                        relation : "daughter",
                        share : 2/3,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "if the shares are more then 1, Decreased from his share according to his original share",
                            "If there is anything left of the estate, it will be returned to them according to there share"
                        ]
                    });
                }
            // WE NOW THAT SON'S DAUTHER EXISTS
            } else if(son_daughter == 1) {
                inheritance_result_table.push({
                    relation : "son's daughter",
                    share : 1/5,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share",
                        "If there is anything left of the estate, it will be returned to her according to her share"
                    ]
                });
            } else {
                inheritance_result_table.push({
                    relation : "son's daughter",
                    share : 2/3,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "if the shares are more then 1, Decreased from his share according to his original share",
                        "If there is anything left of the estate, it will be returned to her according to her share"
                    ]
                });
            }

            const sum_of_all_shares = sum(inheritance_result_table);
            // مسالة عائلة
            if(sum_of_all_shares >= 1) {
                for(let i = 0; i < inheritance_result_table.length; i++) {
                    inheritance_result_table[i].share = inheritance_result_table[i].share * (1/sum_of_all_shares);
                }
            } else { // مسالة عادلة او ردية
                // -1 means there is no mo3asib
                const mo3asib_index = there_is_mo3asib(inheritance_result_table);
                if(mo3asib_index > -1) { // there is mo3asib, give him the rest
                    const the_rest = 1 - sum_of_all_shares;
                    inheritance_result_table[mo3asib_index].share += the_rest;
                } else { // there is no mo3asib , مسالة ردية
                    give_back_the_rest(inheritance_result_table);
                }
            }


        }
        


        function fifth_diagram(table, inheritance_result_table) {
            const father = my_find(table, "father").number;
            const paternal_grandfather = my_find(table, "paternal grandfather").number;
            const mother = my_find(table, "mother").number;
            const maternal_grandmother = my_find(table, "maternal grandmother").number;
            const paternal_grandmother = my_find(table, "paternal grandmother").number;
            const full_brother= my_find(table, "full brother").number;
            const full_sister = my_find(table, "full sister").number;
            const wife = my_find(table, "wife").number;
            const husband = my_find(table, "husband").number;

            if(father == 1) {
                inheritance_result_table.push({
                    relation : "father",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : true,
                    info : [
                    ]
                });
            } else if(paternal_grandfather == 1) {
                inheritance_result_table.push({
                    relation : "paternal grandfather",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : true,
                    info : []
                });
            }


            if(mother == 1) {
                if((full_brother+full_sister) > 1) {
                    inheritance_result_table.push({
                        relation : "mother",
                        share : 1/6,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                } else {
                    inheritance_result_table.push({
                        relation : "mother",
                        share : 1/3,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                }
            } else if(maternal_grandmother == 1) {
                if(paternal_grandmother == 1) {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : 1/12,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                    inheritance_result_table.push({
                        relation : "paternal grandmother",
                        share : 1/12,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                } else {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : 1/6,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                }
            } else if(paternal_grandmother == 1) {
                inheritance_result_table.push({
                    relation : "paternal grandmother",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "If there is anything left of the estate, it will be returned to him according to his share"
                    ]
                });
            }



            if(husband == 1) {
                inheritance_result_table.push({
                    relation : "husband",
                    share : 1/2,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "If there is anything left of the estate, it will not be returned to him"
                    ]
                });
            } else if(wife > 0) {
                inheritance_result_table.push({
                    relation : "wife",
                    share : 1/4,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "If there is anything left of the estate, it will not be returned to him"
                    ]
                });
            }

            // // مسالة عادلة او ردية
            // const sum_of_all_shares = sum(inheritance_result_table);
            // const mo3asib_index = there_is_mo3asib(inheritance_result_table);
            // if(mo3asib_index > -1) { // there is mo3asib, give him the rest
            //     const the_rest = 1 - sum_of_all_shares;
            //     inheritance_result_table[mo3asib_index].share += the_rest;
            // } else { // there is no mo3asib , مسالة ردية
            //     give_back_the_rest(inheritance_result_table);
            // }






            const sum_of_all_shares = sum(inheritance_result_table);
            // مسالة عائلة
            if(sum_of_all_shares >= 1) {
                for(let i = 0; i < inheritance_result_table.length; i++) {
                    inheritance_result_table[i].share = inheritance_result_table[i].share * (1/sum_of_all_shares);
                }
            } else { // مسالة عادلة او ردية
                // -1 means there is no mo3asib
                const mo3asib_index = there_is_mo3asib(inheritance_result_table);
                if(mo3asib_index > -1) { // there is mo3asib, give him the rest
                    const the_rest = 1 - sum_of_all_shares;
                    inheritance_result_table[mo3asib_index].share += the_rest;
                } else { // there is no mo3asib , مسالة ردية
                    give_back_the_rest(inheritance_result_table);
                }
            }

        }




        function sixth_diagram(table, inheritance_result_table) {
            const mother = my_find(table, "mother").number;
            const full_brother = my_find(table, "full brother").number;
            const full_sister = my_find(table, "full sister").number;
            const maternal_grandmother = my_find(table, "maternal grandmother").number;
            const paternal_grandmother = my_find(table, "paternal grandmother").number;
            const wife = my_find(table, "wife").number;
            const husband = my_find(table, "husband").number;
            const mother_brother = my_find(table, "mother's brother").number;
            const mother_sister = my_find(table, "mother's sister").number;

            if(mother == 1) {
                if((full_brother+full_sister) > 1) {
                    inheritance_result_table.push({
                        relation : "mother",
                        share : 1/6,
                        reason : "fardan",
                        mo3asib : true,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                } else {
                    inheritance_result_table.push({
                        relation : "mother",
                        share : 1/3,
                        reason : "fardan",
                        mo3asib : true,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                }
            } else if(maternal_grandmother == 1) {
                if(paternal_grandmother == 1) {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : 1/12,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                    inheritance_result_table.push({
                        relation : "paternal grandmother",
                        share : 1/12,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                } else {
                    inheritance_result_table.push({
                        relation : "maternal grandmother",
                        share : 1/6,
                        reason : "fardan",
                        mo3asib : false,
                        info : [
                            "If there is anything left of the estate, it will be returned to him according to his share"
                        ]
                    });
                }
            } else if(paternal_grandmother == 1) {
                inheritance_result_table.push({
                    relation : "paternal grandmother",
                    share : 1/6,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "If there is anything left of the estate, it will be returned to him according to his share"
                    ]
                });
            }



            if(husband == 1) {
                inheritance_result_table.push({
                    relation : "husband",
                    share : 1/2,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "If there is anything left of the estate, it will not be returned to him "
                    ]
                });
            } else if(wife > 0) {
                inheritance_result_table.push({
                    relation : "wife",
                    share : 1/4,
                    reason : "fardan",
                    mo3asib : false,
                    info : [
                        "If there is anything left of the estate, it will not be returned to her "
                    ]
                });
            }



            if((mother_brother+mother_sister) > 0) {
                if((mother_brother+mother_sister) == 1) {
                    if(mother_brother == 1) {
                        inheritance_result_table.push({
                            relation : "mother's brother",
                            share : 1/6,
                            reason : "fardan",
                            mo3asib : false,
                            info : [
                                "If there is anything left of the estate, it will be returned to him according to his share "
                            ]
                        });
                    } else { // mother_sister == 1
                        
                        inheritance_result_table.push({
                            relation : "mother's sister",
                            share : 1/6,
                            reason : "fardan",
                            mo3asib : false,
                            info : [
                                "If there is anything left of the estate, it will be returned to him according to his share"
                            ]
                        });
                    }
                } else {
                    const mother_sisters_brothers_number = mother_brother+mother_sister;
                    const one_mother_sibling_share = (1/3)/mother_sisters_brothers_number;
                    // there is only sisters
                    if(mother_brother == 0) {
                        inheritance_result_table.push({
                            relation : "mother's sister",
                            share : 1/3,
                            reason : "fardan",
                            mo3asib : false,
                            info : [
                                "If there is anything left of the estate, it will be returned to him according to his share"
                            ]
                        });
                    //there is only brothers
                    } else if(mother_sister == 0) {
                        inheritance_result_table.push({
                            relation : "mother's brother",
                            share : 1/3,
                            reason : "fardan",
                            mo3asib : false,
                            info : [
                                "If there is anything left of the estate, it will be returned to him according to his share"
                            ]
                        });
                    } else {// there is mother's brothers and sisters
                        inheritance_result_table.push({
                            relation : "mother's sister",
                            share : one_mother_sibling_share*mother_sister,
                            reason : "fardan",
                            mo3asib : false,
                            info : [
                                "If there is anything left of the estate, it will be returned to him according to his share"
                            ]
                        });
                        inheritance_result_table.push({
                            relation : "mother's brother",
                            share : one_mother_sibling_share*mother_brother,
                            reason : "fardan",
                            mo3asib : false,
                            info : [
                                "If there is anything left of the estate, it will be returned to him according to his share"
                            ]
                        });
                    }
                }
            }


            // give_back_the_rest(inheritance_result_table);


            const sum_of_all_shares = sum(inheritance_result_table);
            // مسالة عائلة
            if(sum_of_all_shares >= 1) {
                for(let i = 0; i < inheritance_result_table.length; i++) {
                    inheritance_result_table[i].share = inheritance_result_table[i].share * (1/sum_of_all_shares);
                }
            } else { // مسالة عادلة او ردية
                // -1 means there is no mo3asib
                const mo3asib_index = there_is_mo3asib(inheritance_result_table);
                if(mo3asib_index > -1) { // there is mo3asib, give him the rest
                    const the_rest = 1 - sum_of_all_shares;
                    inheritance_result_table[mo3asib_index].share += the_rest;
                } else { // there is no mo3asib , مسالة ردية
                    give_back_the_rest(inheritance_result_table);
                }
            }
        }



        const table = [
            {
                relation : "wife",
                number : 0
            },
            {
                relation : "husband",
                number : 0
            },
            {
                relation : "mother",
                number : 0
            },
            {
                relation : "father",
                number : 0
            },
            {
                relation : "paternal grandfather",
                number : 0
            },
            {
                relation : "maternal grandmother",
                number : 0
            },
            {
                relation : "paternal grandmother",
                number : 0
            },
            {
                relation : "daughter",
                number : 0
            },
            {
                relation : "son",
                number : 0
            },
            {
                relation : "son's son",
                number : 0
            },
            {
                relation : "son's daughter",
                number : 0
            },
            {
                relation : "mother's brother",
                number : 0
            },
            {
                relation : "mother's sister",
                number : 0
            },
            {
                relation : "full brother",
                number : 0
            },
            {
                relation : "full sister",
                number : 0
            },
            {
                relation : "father's brother",
                number : 0
            },
            {
                relation : "father's sister",
                number : 0
            },
            {
                relation : "full brother's son",
                number : 0
            },
            {
                relation : "paternal uncle's son",
                number : 0
            },
            {
                relation : "father's full brother",
                number : 0
            },
            {
                relation : "father's paternal uncle",
                number : 0
            },
            {
                relation : "full paternal uncle's son",
                number : 0
            },
            {
                relation : "father's paternal uncle's son",
                number : 0
            },
        ]
        
        const inheritance_result_table = [];

        sixth_diagram(table, inheritance_result_table);
        print(inheritance_result_table)
   </script>
</body>
</html>